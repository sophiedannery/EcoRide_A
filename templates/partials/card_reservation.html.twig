<div class="card text-center my-5 mx-5">

	<div class="card-header">
		{{ r.adresse_depart }}
		→
		{{ r.adresse_arrivee }}
	</div>

	<div class="card-body">

		<div class="my-2 mx-5">

			<h5 class="card-title">
				Les infos</h5>

			<p class="card-text">
				<i class="fa-solid fa-calendar-days"></i>
				<strong>Départ :</strong>
				{{ r.date_depart|date('d/m/Y') }}
				à
				{{ r.date_depart|date('H:i') }}</p>
			<p class="card-text">
				<i class="fa-solid fa-coins"></i>
				<strong>Prix :
				</strong>
				{{ r.credits_utilises }}
				crédits</p>
		</div>


		<div class="mb-2">

			<h5 class="card-title">
				Le chauffeur</h5>

			{% if r.chauffeur_photo %}
				<div class="mb-2">
					<img src="{{ asset('uploads/photos/' ~ r.chauffeur_photo) }}" alt="Photo de profil de {{ r.chauffeur_pseudo }}" class="rounded-circle" style="width: 60px; height: 60px; object-fit: cover;"/>
					<strong>{{ r.chauffeur_pseudo }}</strong>
				</div>
			{% else %}
				<p class="card-text">
					<i class="fa-solid fa-user"></i>
					<strong>{{ r.chauffeur_pseudo }}</strong>
				</p>
			{% endif %}

		</div>

		<div class="mb-2">
			<h5 class="card-title">
				Le véhicule</h5>

			<p class="card-text">
				<i class="fa-solid fa-car"></i>
				{{ r.vehicule_marque }}
				-
				{{ r.vehicule_modele }}
				-
				{{ r.vehicule_couleur }}
			</p>
			<p class="card-text">
				{% if r.vehicule_energie == 'electrique' %}
					<i class="fa-solid fa-leaf"></i>
					Voyage écologique
				{% endif %}
			</p>

		</div>


		{% if r.reservation_statut == 'confirmée' and r.statut_trajet != 'en_cours' and r.statut_trajet != 'terminé' %}
			<form method='post' action="{{ path('app_reservation_annuler', {'id': r.reservation_id}) }}" onsubmit="return confirm('Voulez-vous vraiment annuler cette réservation ?')">
				<input type="hidden" name="_token" value="{{ csrf_token('cancel_reservation' ~ r.reservation_id) }}">
				<button class="btn btn-sm btn-danger">Annuler ma réservation</button>
			</form>
		{% endif %}
		{% if r.reservation_statut == 'confirmée' and r.statut_trajet == 'terminé' %}

			<a href="{{ path('app_reservation_resume', {'id': r.reservation_id}) }}" class="btn btn-sm btn-success">Valider le trajet</a>

		{% endif %}
		{% if r.statut_trajet == 'validé' %}
			<button class="btn btn-sm btn-success disabled">Trajet terminé</button>
		{% endif %}
		{% if r.reservation_statut == 'signalé' %}
			<button class="btn btn-sm btn-warning disabled">Trajet signalé</button>
		{% endif %}
		{% if r.statut_trajet == 'validé' and not r.avis %}
			<a href="{{ path('app_avis_new', {'reservationId': r.reservation_id}) }}" class="btn btn-sm btn-success">Laisser un avis</a>
		{% endif %}

	</div>
	<div class="card-footer text-body-secondary">
		Trajet réservé le :
		{{ r.date_confirmation|date('d/m/Y') }}
	</div>
</div>
